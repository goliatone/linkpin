<% include _link-form.ejs %>

<section id="navbar" class="container grid-960">
<div class="container">
    <div class="columns">
        <div class="column centered col-8">
<% links.forEach(function(link){%>
    <div class="card">
        <div class="card-header">
            <h4 class="card-title"><a href="<%= link.url%>"  target="_blank"><%= link.title %></a></h4>
            <h6 class="card-meta"><a href="/site/link/<%= link.id %>" class="float-right btn btn-sm btn-primary"><span class="icon icon-mode_edit"></span></a></h6>
        </div>
        <div class="card-body">
            <%= link.description %>
        </div>

        <div class="card-footer">
        <% link.tags.forEach(function(tag){%>
            <div class="chip-sm">
                <span class="chip-name"><a href="/site/tag/<%=tag.label%>"><%= tag.label %></a></span>
                <button class="btn btn-clear"></button>
            </div>
        <% })%>
        </div>
    </div>
    </br>
<% })%>
</div>
</div>
</scection>
<% include ../_pagination.ejs %>

<script type"text/javascript" src="/js/dependencies/sails.io.js"></script>
<script type"text/javascript">
// The automatically-created socket is exposed as io.socket.
// Use .on() to subscribe to the 'user' event on the client.
// This event is sent by the Sails "create", "update",
// "delete", "add" and "remove" blueprints to any socket that
// is subscribed to one or more User model instances.
io.socket.on('link', function $onLink (data) {
  console.log('Link alert!', data);
});

// Using .get('/user') will retrieve a list of current User models,
// subscribe this socket to those models, AND subscribe this socket
// to notifications about new User models when they are created.
io.socket.get('/link', function gotResponse(body, response) {
  console.log('Current links: ', body);
});
</script>
